name: js_cli
version: "0.1.0"
description: "Command-line interface for JavaScript runtime"

dependencies:
  - parser
  - interpreter
  - builtins
  - async_runtime
  - jit_compiler

exports:
  functions:
    - name: main
      description: "Entry point"
      returns: "Result<(), Box<dyn Error>>"

  types:
    - name: Runtime
      methods:
        - name: new
          params:
            - enable_jit: bool
          returns: Self
        - name: execute_file
          params:
            - path: "&str"
          returns: "Result<Value, JsError>"
        - name: execute_string
          params:
            - source: "&str"
          returns: "Result<Value, JsError>"
        - name: repl
          returns: "Result<(), JsError>"

cli_options:
  - name: file
    short: f
    long: file
    description: "JavaScript file to execute"
    type: "Option<String>"

  - name: repl
    short: r
    long: repl
    description: "Run interactive REPL"
    type: bool

  - name: jit
    long: jit
    description: "Enable JIT compilation"
    type: bool
    default: true

  - name: print_bytecode
    long: print-bytecode
    description: "Print generated bytecode"
    type: bool

  - name: print_ast
    long: print-ast
    description: "Print AST"
    type: bool

requirements:
  - Parse CLI arguments with clap
  - REPL with rustyline
  - File execution
  - Console output wiring
  - Graceful error handling
  - 80%+ test coverage
